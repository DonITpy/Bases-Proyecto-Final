{% extends "base.html" %}
{% block content %}
    <h1>Bienvenido al Sistema de Flota Logística</h1>
    
    {% if usuario %}
        <div style="text-align:center; background:white; padding:25px; margin:20px auto; width:80%; border-radius:10px; box-shadow:0 4px 12px rgba(0,0,0,0.1);">
            <h2 style="margin-top:0;">Hola, {{usuario["nombre"]}}</h2>
            <p style="font-size:1.1em; color:#666;">
                Tu rol: 
                <span style="background:#667eea; color:white; padding:5px 15px; border-radius:20px; font-weight:600;">
                {% if usuario["rol"] == "admin" %}
                    Administrador
                {% elif usuario["rol"] == "mecanico" %}
                    Mecánico
                {% elif usuario["rol"] == "conductor" %}
                    Conductor
                {% elif usuario["rol"] == "logistica" %}
                    Logística
                {% elif usuario["rol"] in ["observador", "consultor"] %}
                    Consultor
                {% endif %}
                </span>
            </p>
        </div>
    {% endif %}
    
    <div style="width:80%; margin:auto; background:white; padding:30px; border-radius:10px; box-shadow:0 4px 12px rgba(0,0,0,0.1);">
        <h2>¿Qué puedo hacer?</h2>
        
        <div style="display:grid; grid-template-columns:repeat(auto-fit, minmax(250px, 1fr)); gap:20px; margin-top:20px;">
            {# VEHÍCULOS – Admin (CRUD), Mecánico (RU), Logística (RU), Conductor (R), Consultor (R) #}
            {% if usuario["rol"] in ["admin","mecanico","logistica","conductor","observador","consultor"] %}
            <div style="background:#e3f2fd; padding:20px; border-radius:8px; border-left:4px solid #2196F3;">
                <h3>Vehículos</h3>
                <p>
                    {% if usuario["rol"] == "admin" %}
                        Gestiona la información de todos los vehículos: crear, editar, eliminar y asignar flota o estado operativo.
                    {% elif usuario["rol"] == "mecanico" %}
                        Consulta y actualiza datos técnicos de los vehículos, como kilometraje y estado.
                    {% elif usuario["rol"] == "logistica" %}
                        Consulta y actualiza la información necesaria de los vehículos para planear y operar los viajes.
                    {% elif usuario["rol"] == "conductor" %}
                        Consulta los datos del vehículo que tienes asignado: modelo, matrícula, capacidad y estado.
                    {% else %}
                        Consulta el catálogo de vehículos registrados en el sistema.
                    {% endif %}
                </p>
            </div>
            {% endif %}

            {# CONDUCTORES – Admin (CRUD), Logística (R), Conductor (R), Consultor (R) #}
            {% if usuario["rol"] in ["admin","logistica","conductor","observador","consultor"] %}
            <div style="background:#f3e5f5; padding:20px; border-radius:8px; border-left:4px solid #9C27B0;">
                <h3>Conductores</h3>
                <p>
                    {% if usuario["rol"] == "admin" %}
                        Administra el registro de conductores: alta, edición, baja y vinculación con usuarios del sistema.
                    {% elif usuario["rol"] == "logistica" %}
                        Consulta el listado de conductores para asignarlos a viajes y órdenes de servicio.
                    {% elif usuario["rol"] == "conductor" %}
                        Consulta tu información registrada como conductor dentro del sistema.
                    {% else %}
                        Consulta la información de todos los conductores registrados, únicamente en modo lectura.
                    {% endif %}
                </p>
            </div>
            {% endif %}

            {# FLOTA – Admin (CRUD), Logística (R), Conductor (R), Consultor (R) #}
            {% if usuario["rol"] in ["admin","logistica","conductor","observador","consultor"] %}
            <div style="background:#e0f2f1; padding:20px; border-radius:8px; border-left:4px solid #009688;">
                <h3>Flota</h3>
                <p>
                    {% if usuario["rol"] == "admin" %}
                        Crea, edita y elimina flotas. Controla qué vehículos pertenecen a cada flota.
                    {% else %}
                        Consulta la asignación de vehículos a las distintas flotas y su composición general.
                    {% endif %}
                </p>
            </div>
            {% endif %}

            {# ÓRDENES DE SERVICIO – Admin (CRUD), Logística (CRU), Conductor (R), Consultor (R) #}
            {% if usuario["rol"] in ["admin","logistica","conductor","observador","consultor"] %}
            <div style="background:#fff9c4; padding:20px; border-radius:8px; border-left:4px solid #FFEB3B;">
                <h3>Órdenes de Servicio</h3>
                <p>
                    {% if usuario["rol"] == "admin" %}
                        Administra todas las órdenes de servicio: crear, editar, cancelar y relacionar con viajes.
                    {% elif usuario["rol"] == "logistica" %}
                        Crea, consulta y actualiza órdenes de servicio para la flota, incluyendo estado y asignación a viajes.
                    {% elif usuario["rol"] == "conductor" %}
                        Consulta las órdenes de servicio asociadas a tus viajes.
                    {% else %}
                        Consulta las órdenes de servicio registradas para seguimiento y análisis.
                    {% endif %}
                </p>
            </div>
            {% endif %}

            {# VIAJES – Admin (CRUD), Logística (CRU), Conductor (R), Consultor (R) #}
            {% if usuario["rol"] in ["admin","logistica","conductor","observador","consultor"] %}
            <div style="background:#e8f5e9; padding:20px; border-radius:8px; border-left:4px solid #4CAF50;">
                <h3>Viajes</h3>
                <p>
                    {% if usuario["rol"] in ["admin","logistica"] %}
                        Planifica, crea, consulta y actualiza viajes. Define origen, destino, fechas, estado y asigna vehículo, conductor y orden de servicio.
                    {% elif usuario["rol"] == "conductor" %}
                        Consulta tus viajes asignados, su estado y la información asociada a cada ruta.
                    {% else %}
                        Consulta el historial y la programación de viajes registrados en el sistema.
                    {% endif %}
                </p>
            </div>
            {% endif %}

            {# MANTENIMIENTO – Admin (CRUD), Mecánico (CR), Logística (R), Conductor (R) #}
            {% if usuario["rol"] in ["admin","mecanico","logistica","conductor"] %}
            <div style="background:#fff3e0; padding:20px; border-radius:8px; border-left:4px solid #FF9800;">
                <h3>Mantenimiento</h3>
                <p>
                    {% if usuario["rol"] == "admin" %}
                        Administra todos los registros de mantenimiento preventivo, correctivo y reparaciones de los vehículos.
                    {% elif usuario["rol"] == "mecanico" %}
                        Registra y consulta mantenimientos realizados a los vehículos, incluyendo tipo, fecha y costo.
                    {% elif usuario["rol"] == "logistica" %}
                        Consulta el historial de mantenimiento para apoyar la planeación de viajes y disponibilidad de la flota.
                    {% else %}
                        Consulta los mantenimientos realizados al vehículo que utilizas.
                    {% endif %}
                </p>
            </div>
            {% endif %}

            {# CONSUMO – Admin (CRUD), Logística (R), Conductor (CR) #}
            {% if usuario["rol"] in ["admin","logistica","conductor"] %}
            <div style="background:#fce4ec; padding:20px; border-radius:8px; border-left:4px solid #E91E63;">
                <h3>Consumo</h3>
                <p>
                    {% if usuario["rol"] == "admin" %}
                        Gestiona todos los registros de consumo de combustible: litros, tipo de combustible y costos por vehículo.
                    {% elif usuario["rol"] == "logistica" %}
                        Consulta consumos de combustible para analizar costos operativos y rendimiento de la flota.
                    {% else %}
                        Registra y consulta consumos de combustible del vehículo que utilizas en tus viajes.
                    {% endif %}
                </p>
            </div>
            {% endif %}

            {# INCIDENTES – Admin (CRUD), Mecánico (CR), Logística (R), Conductor (CR) #}
            {% if usuario["rol"] in ["admin","mecanico","logistica","conductor"] %}
            <div style="background:#f1f8e9; padding:20px; border-radius:8px; border-left:4px solid #8BC34A;">
                <h3>Incidentes</h3>
                <p>
                    {% if usuario["rol"] == "admin" %}
                        Administra todo el historial de incidentes: creación, actualización y eliminación de registros.
                    {% elif usuario["rol"] == "mecanico" %}
                        Registra y consulta incidentes relacionados con el estado físico del vehículo.
                    {% elif usuario["rol"] == "logistica" %}
                        Consulta incidentes para evaluar riesgos y tomar decisiones operativas.
                    {% else %}
                        Registra incidentes ocurridos durante tus viajes y consulta su historial.
                    {% endif %}
                </p>
            </div>
            {% endif %}

            {# LICENCIAS – Admin (CRUD), Logística (R), Conductor (R) #}
            {% if usuario["rol"] in ["admin","logistica","conductor"] %}
            <div style="background:#e0f7fa; padding:20px; border-radius:8px; border-left:4px solid #00ACC1;">
                <h3>Licencias</h3>
                <p>
                    {% if usuario["rol"] == "admin" %}
                        Administra las licencias de los conductores: registro, actualización, vencimientos y tipos.
                    {% elif usuario["rol"] == "logistica" %}
                        Consulta licencias y fechas de vencimiento para asegurar que los conductores estén habilitados.
                    {% else %}
                        Consulta la información de tus licencias registradas en el sistema.
                    {% endif %}
                </p>
            </div>
            {% endif %}

            {# EVALUACIONES – Admin (CRUD), Logística (CR), Conductor (R) #}
            {% if usuario["rol"] in ["admin","logistica","conductor"] %}
            <div style="background:#f3e5f5; padding:20px; border-radius:8px; border-left:4px solid #AB47BC;">
                <h3>Evaluaciones</h3>
                <p>
                    {% if usuario["rol"] == "admin" %}
                        Gestiona evaluaciones de usuarios: creación, edición y análisis de puntuaciones y comentarios.
                    {% elif usuario["rol"] == "logistica" %}
                        Registra y consulta evaluaciones relacionadas con desempeño operativo y servicio.
                    {% else %}
                        Consulta las evaluaciones asociadas a tu desempeño en el sistema.
                    {% endif %}
                </p>
            </div>
            {% endif %}

            {# REPORTES – Admin (R), Mecánico (R), Logística (R), Conductor (R) #}
            {% if usuario["rol"] in ["admin","mecanico","logistica","conductor"] %}
            <div style="background:#eceff1; padding:20px; border-radius:8px; border-left:4px solid #607D8B;">
                <h3>Reportes</h3>
                <p>Accede a reportes y análisis generados a partir de viajes, consumos, mantenimientos, incidentes y evaluaciones.</p>
            </div>
            {% endif %}
        </div>
        
        <div style="margin-top:30px; padding:20px; background:#f5f5f5; border-radius:8px; border-left:4px solid #757575;">
            <h3>Resumen de Permisos por Rol:</h3>
            <ul style="list-style-position:inside; color:#555;">
                <li><strong>Admin:</strong> CRUD completo en Usuarios, Conductores, Flota, Vehículos, Órdenes de Servicio, Viajes, Mantenimiento, Consumo, Incidentes, Licencias y Evaluaciones; acceso de lectura a todos los reportes.</li>
                <li><strong>Mecánico:</strong> Lectura y actualización de Vehículos; creación y consulta de Mantenimientos e Incidentes; acceso de lectura a Reportes.</li>
                <li><strong>Logística:</strong> Lectura de Conductores, Flota, Mantenimiento, Consumo, Incidentes, Licencias y Reportes; lectura y actualización de Vehículos; creación, lectura y actualización de Órdenes de Servicio y Viajes; creación y consulta de Evaluaciones.</li>
                <li><strong>Conductor:</strong> Lectura de Conductores, Flota, Vehículos, Órdenes de Servicio, Viajes, Mantenimiento, Licencias, Evaluaciones y Reportes; creación y consulta de Consumo e Incidentes asociados a sus vehículos y viajes.</li>
                <li><strong>Consultor:</strong> Solo lectura sobre Conductores, Flota, Vehículos, Órdenes de Servicio y Viajes, enfocado a análisis sin modificar datos.</li>
            </ul>
        </div>
        
        <div style="margin-top:20px; padding:20px; background:#f5f5f5; border-radius:8px; border-left:4px solid #757575;">
            <h3>Características principales:</h3>
            <ul style="list-style-position:inside; color:#555;">
                <li>Sistema de roles y permisos (5 roles diferenciados)</li>
                <li>Búsqueda y filtros en todas las secciones</li>
                <li>Descarga de reportes en CSV</li>
                <li>Gestión completa de CRUD según permisos</li>
                <li>Validación de datos y duplicados</li>
                <li>Soporte para acentos y caracteres especiales</li>
                <li>Interfaz responsiva y amigable</li>
            </ul>
        </div>
    </div>
{% endblock %}