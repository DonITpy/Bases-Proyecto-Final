{% extends "base.html" %}
{% block content %}
    <h1>Viajes Registrados</h1>
    
    {% if error %}
        <div style="background:#ffcccc; color:#cc0000; padding:15px; margin:20px auto; width:80%; text-align:center; border-radius:5px; border:2px solid #cc0000;">
            <strong>âš ï¸ Error:</strong> {{ error }}
        </div>
    {% endif %}
    
    <table>
        <tr>
            <th>ID</th>
            <th>Origen</th>
            <th>Destino</th>
            <th>Fecha Salida</th>
            <th>Estado</th>
            {% if usuario and usuario["rol"] == "admin" %}
                <th>Acciones</th>
            {% endif %}
        </tr>
        {% for v in viajes %}
        <tr>
            <td>{{ v.id_viaje }}</td>
            <td>{{ v.origen }}</td>
            <td>{{ v.destino }}</td>
            <td>{{ v.fecha_salida }}</td>
            <td>{{ v.estado }}</td>
            {% if usuario and usuario["rol"] == "admin" %}
                <td>
                    <a href="/viajes_edit/{{v.id_viaje}}" style="color:#336699; margin-right:10px;">âœï¸ Editar</a>
                    <a href="/viajes_delete/{{v.id_viaje}}" onclick="return confirm('Â¿Eliminar?');" class="delete-btn">ğŸ—‘ï¸ Eliminar</a>
                </td>
            {% endif %}
        </tr>
        {% endfor %}
    </table>
    {% if usuario and usuario["rol"] == "admin" %}
    <h2 style="text-align:center;">Agregar Viaje</h2>
    <form method="post" action="/viajes_create">
        <input type="text" name="origen" placeholder="Origen" required>
        <input type="text" name="destino" placeholder="Destino" required>
        <input type="date" name="fecha_salida" required>
        <select name="estado" required>
            <option value="">Seleccionar estado</option>
            <option value="pendiente">Pendiente</option>
            <option value="en progreso">En progreso</option>
            <option value="completado">Completado</option>
        </select>
        <button type="submit">Agregar Viaje</button>
    </form>
    {% endif %}
{% endblock %}
